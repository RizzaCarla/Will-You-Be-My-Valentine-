<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Special Delivery üíå</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Dancing Script',cursive;
  background:linear-gradient(135deg,#ffd6e7,#ffc2d1);
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* MAILBOX */
.mailbox{
  width:200px;height:160px;
  background:#ff4d6d;
  border-radius:20px;
  position:relative;
  cursor:pointer;
}
.flag{width:10px;height:60px;background:white;position:absolute;right:-15px;top:20px;}
.mail-slot{width:120px;height:20px;background:#333;position:absolute;top:70px;left:40px;border-radius:10px;}

/* ENVELOPE */
.envelope{
  display:none;
  width:340px;height:230px;
  background:white;
  border-radius:12px;
  position:relative;
  transform-style:preserve-3d;
  transition:1s;
  cursor:pointer;
}
.envelope.flip{ transform:rotateY(180deg); }

.face{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:12px;}

/* BACK SIDE */
.front{ transform:rotateY(180deg); }

.tofrom{
  position:absolute;
  top:15px;left:20px;
  font-size:22px;
}

.stamp{
  position:absolute;
  right:15px;top:15px;
  width:90px;
}

.postmark{
  position:absolute;
  bottom:20px;
  left:20px;
  border:3px solid #444;
  border-radius:50%;
  padding:12px;
  font-size:14px;
  text-align:center;
}

/* FLAP */
.flap{
  position:absolute;
  border-left:170px solid transparent;
  border-right:170px solid transparent;
  border-top:120px solid #ff4d6d;
  transform-origin:top;
}

/* LETTER MODAL */
.letter{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:white;
  display:none;
  flex-direction:column;
  padding:20px;
  overflow-y:auto;
}

.close{
  font-size:28px;
  cursor:pointer;
}

.photo{
  width:100%;
  border-radius:12px;
  margin:20px 0;
}

.type{
  font-size:30px;
  border-right:3px solid pink;
  overflow:hidden;
  white-space:nowrap;
  width:0;
  animation:typing 3s steps(40,end) forwards;
}
@keyframes typing{ to{ width:100%; } }

button{
  font-size:24px;
  padding:10px 20px;
  margin:20px 10px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-family:inherit;
}
.yes{ background:#ff4d6d;color:white; }
.no{ background:#333;color:white; position:absolute;}

/* HEARTS */
.heart{
  position:fixed;
  bottom:-20px;
  font-size:26px;
  animation:float 8s linear;
}
@keyframes float{
  to{ transform:translateY(-110vh); opacity:0;}
}
</style>
</head>

<body>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/05/23/audio_4f9d6a0c5d.mp3">
</audio>

<div class="mailbox" id="mailbox">
  <div class="flag"></div>
  <div class="mail-slot"></div>
</div>

<div class="envelope" id="envelope">

  <!-- BACK -->
  <div class="face back">
    <div class="tofrom">
      To Aaron üíï<br>
      From Rizza üíñ
    </div>

    <img src="/mnt/data/A6557CED-4142-4432-9A0C-4FAC89CBEEA0.png" class="stamp">

    <div class="postmark" id="stampDate"></div>
  </div>

  <!-- FRONT -->
  <div class="face front">
    <div class="flap" id="flap"></div>
  </div>
</div>

<!-- LETTER -->
<div class="letter" id="letter">
  <div class="close" onclick="closeLetter()">‚úï</div>

  <img src="photo.jpeg" class="photo">

  <div class="type">
    Will you be my Valentine? ‚ù§Ô∏è
  </div>

  <div style="margin-top:40px;">
    <button class="yes" id="yesBtn">YES PLEASE</button>
    <button class="no" id="noBtn">NO THANK YOU</button>
  </div>

  <div id="responseText" style="font-size:28px;margin-top:30px;"></div>
</div>

<script>
const mailbox=document.getElementById("mailbox");
const envelope=document.getElementById("envelope");
const flap=document.getElementById("flap");
const letter=document.getElementById("letter");
const music=document.getElementById("music");
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const responseText=document.getElementById("responseText");

let noClicks=0;

/* DATE STAMP */
const today=new Date();
document.getElementById("stampDate").innerText=
`Cupid Post Office\n${today.toLocaleDateString()}`;

/* MAILBOX */
mailbox.onclick=()=>{
  mailbox.style.display="none";
  envelope.style.display="block";
};

/* FLIP */
envelope.onclick=()=> envelope.classList.toggle("flip");

/* OPEN */
flap.addEventListener("click",()=>{
  letter.style.display="flex";
});

/* CLOSE */
function closeLetter(){
  letter.style.display="none";
}

/* YES */
yesBtn.onclick=()=>{
  music.play();
  startHearts();
  navigator.vibrate?.(200);

  responseText.innerHTML=
  "I love you! ‚ô•Ô∏è<br><br>I‚Äôm so glad you said yes because I wouldn‚Äôt have taken no as an answer.<br><br>See you on our valentines date this weekend!";
};

/* NO GAME */
noBtn.onclick=()=>{
  noClicks++;
  if(noClicks<5){
    noBtn.style.left=Math.random()*70+"%";
    noBtn.style.top=Math.random()*70+"%";
  }else{
    noBtn.disabled=true;
    noBtn.style.transition="1s";
    noBtn.style.transform="translateY(-500px)";
  }
};

/* HEARTS */
function startHearts(){
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="‚ù§Ô∏è";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),8000);
  },2500);
}
</script>

</body>
</html>