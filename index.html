<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Special Delivery üíå</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

<style>
  :root{
    --pink1:#ffd6e7;
    --pink2:#ffc2d1;
    --accent:#ff4d6d;
    --ink:#2c2c2c;

    --envelopeW:340px;
    --envelopeH:230px;

    --cardMax:560px;
    --cardMinH:230px;
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background:linear-gradient(135deg,var(--pink1),var(--pink2));
    height:100vh;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    user-select:none;
  }

  /* MAILBOX */
  .mailbox{
    width:200px;height:160px;
    background:var(--accent);
    border-radius:20px;
    position:relative;
    cursor:pointer;
    box-shadow:0 18px 35px rgba(0,0,0,.18);
  }
  .flag{
    width:10px;height:60px;background:white;
    position:absolute;right:-15px;top:20px;border-radius:6px;
  }
  .mail-slot{
    width:120px;height:20px;background:#333;
    position:absolute;top:70px;left:40px;border-radius:10px;opacity:.9;
  }

  /* ENVELOPE */
  .envelope{
    display:none;
    width:var(--envelopeW);
    height:var(--envelopeH);
    background:white;
    border-radius:12px;
    position:relative;
    transform-style:preserve-3d;
    transition:transform 1s;
    cursor:pointer;
    box-shadow:0 18px 40px rgba(0,0,0,.18);
  }
  .envelope.flip{ transform:rotateY(180deg); }

  .face{
    position:absolute;
    inset:0;
    backface-visibility:hidden;
    border-radius:12px;
    overflow:hidden;
  }

  /* BACK SIDE */
  .back{ background:#fff; }

  /* FRONT SIDE */
  .front{
    transform:rotateY(180deg);
    background:#fff;
  }

  .tofrom{
    position:absolute;
    top:16px;
    left:16px;
    font-size:18px;
    line-height:1.25;
    font-weight:700;
    color:#1f1f1f;
  }

  /* Stamp block (top right) */
  .stamp-area{
    position:absolute;
    top:14px;
    right:14px;
    width:104px;
    height:130px;
  }

  .stamp-img{
    position:absolute;
    top:0;
    right:0;
    width:92px;
    height:auto;
    border-radius:6px;
    border:2px solid rgba(0,0,0,.25);
    box-shadow:0 8px 16px rgba(0,0,0,.12);
    display:block;
    background:#fff;
  }

  /* Ink delivered stamp overlaps the stamp image */
  .ink-stamp{
    position:absolute;
    top:56px;          /* overlap region */
    right:6px;
    transform:rotate(-12deg);
    border:3px solid var(--ink);
    color:var(--ink);
    padding:8px 10px;
    border-radius:10px;
    font-weight:700;
    font-size:12px;
    letter-spacing:.4px;
    background:rgba(255,255,255,.75);
    box-shadow:0 5px 10px rgba(0,0,0,.10);
    pointer-events:none;
  }
  .ink-stamp .big{
    display:block;
    font-size:14px;
    letter-spacing:1px;
  }
  .ink-stamp .small{
    display:block;
    font-size:11px;
    opacity:.95;
    white-space:nowrap;
  }

  /* Flap */
  .flap{
    position:absolute;
    left:0; right:0;
    top:0;
    margin:auto;
    width:0;height:0;
    border-left:170px solid transparent;
    border-right:170px solid transparent;
    border-top:120px solid var(--accent);
    transform-origin:top;
    cursor:pointer;
  }
  .front::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:12px;
    border:2px solid rgba(0,0,0,.06);
    pointer-events:none;
  }

  /* OVERLAY (spaces around letter so background shows) */
  .overlay{
    position:fixed;
    inset:0;
    display:none;
    place-items:center;
    padding:22px; /* <-- space so you can see the old background */
    background:rgba(0,0,0,.18);
  }

  .card{
    width:min(92vw, var(--cardMax));
    max-height:82vh;
    overflow:auto;
    background:white;
    border-radius:18px;
    box-shadow:0 22px 55px rgba(0,0,0,.24);
    padding:16px 16px 22px;
    position:relative;
    min-height:var(--cardMinH);
  }

  .card-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding-bottom:8px;
    border-bottom:1px solid rgba(0,0,0,.08);
    margin-bottom:12px;
  }

  .card-title{
    font-weight:800;
    font-size:18px;
  }

  .close{
    width:42px;height:42px;
    border-radius:14px;
    border:none;
    cursor:pointer;
    font-size:20px;
    background:rgba(0,0,0,.06);
    transition:transform .15s ease, background .15s ease;
  }
  .close:hover{ background:rgba(0,0,0,.10); transform:translateY(-1px); }
  .close:active{ transform:scale(.98); }

  /* Images fit inside letter */
  .photo{
    width:100%;
    height:clamp(140px, 28vh, 240px);
    object-fit:cover;
    border-radius:14px;
    margin:10px 0 14px;
  }

  /* typing line */
  .type{
    font-size:22px;
    font-weight:800;
    border-right:3px solid rgba(255,77,109,.55);
    overflow:hidden;
    white-space:nowrap;
    width:0;
    animation:typing 2.4s steps(34,end) forwards;
  }
  @keyframes typing{ to{ width:100%; } }

  .btn-row{
    margin-top:18px;
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
    position:relative;
    min-height:60px; /* space for NO button to move without overlapping layout too much */
  }

  /* Rounded pill, non-cursive font, lower-case text */
  .pill{
    font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-size:18px;
    font-weight:800;
    padding:12px 22px;
    border:none;
    border-radius:999px;
    cursor:pointer;
    letter-spacing:.3px;
    text-transform:lowercase; /* ensures it shows "yes" and "no" */
    transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
    box-shadow:0 12px 24px rgba(0,0,0,.12);
  }
  .pill:hover{
    transform:translateY(-2px);
    filter:brightness(1.02);
    box-shadow:0 16px 30px rgba(0,0,0,.16);
  }
  .pill:active{ transform:translateY(0px) scale(.98); }

  .yes{
    background:var(--accent);
    color:white;
  }

  .no{
    background:#2f2f2f;
    color:white;
    position:relative; /* will become absolute once we start moving it */
  }

  .hidden{ display:none !important; }

  .response-text{
    font-size:18px;
    line-height:1.5;
    font-weight:700;
  }
</style>
</head>

<body>

<div class="mailbox" id="mailbox" aria-label="Mailbox">
  <div class="flag"></div>
  <div class="mail-slot"></div>
</div>

<div class="envelope" id="envelope" aria-label="Envelope">

  <!-- BACK -->
  <div class="face back">
    <div class="tofrom">
      To Aaron<br>
      From Rizza
    </div>

    <div class="stamp-area">
      <!-- IMPORTANT: replace this with a real path/URL in your project. /mnt/data won't work on a normal website -->
      <img src="/mnt/data/A6557CED-4142-4432-9A0C-4FAC89CBEEA0.png" class="stamp-img" alt="Stamp">
      <div class="ink-stamp" aria-hidden="true">
        <span class="big">DELIVERED</span>
        <span class="small" id="stampDate"></span>
      </div>
    </div>
  </div>

  <!-- FRONT -->
  <div class="face front">
    <div class="flap" id="flap" title="Open"></div>
  </div>
</div>

<!-- FIRST LETTER -->
<div class="overlay" id="overlayLetter">
  <div class="card" id="letterCard" role="dialog" aria-modal="true">
    <div class="card-header">
      <div class="card-title">Special Note</div>
      <button class="close" id="closeLetterBtn" aria-label="Close">‚úï</button>
    </div>

    <img src="photo.jpeg" class="photo" alt="Photo 1">

    <div class="type">Will you be my Valentine?</div>

    <div class="btn-row" id="btnRow">
      <button class="pill yes" id="yesBtn">yes</button>
      <button class="pill no" id="noBtn">no</button>
    </div>
  </div>
</div>

<!-- RESPONSE LETTER -->
<div class="overlay" id="overlayResponse">
  <div class="card" id="responseCard" role="dialog" aria-modal="true">
    <div class="card-header">
      <div class="card-title">Message</div>
      <button class="close" id="closeResponseBtn" aria-label="Close">‚úï</button>
    </div>

    <img src="photo2.jpeg" class="photo" alt="Photo 2">

    <div class="response-text">
      I love you ‚ô•Ô∏è Thank you for being my valentine.<br><br>
      I cant wait for our hiking date this weekend.<br><br>
      PS. I wouldn‚Äôt have taken no for an answer.
    </div>
  </div>
</div>

<script>
  const mailbox = document.getElementById("mailbox");
  const envelope = document.getElementById("envelope");
  const flap = document.getElementById("flap");

  const overlayLetter = document.getElementById("overlayLetter");
  const letterCard = document.getElementById("letterCard");
  const closeLetterBtn = document.getElementById("closeLetterBtn");

  const overlayResponse = document.getElementById("overlayResponse");
  const responseCard = document.getElementById("responseCard");
  const closeResponseBtn = document.getElementById("closeResponseBtn");

  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const btnRow = document.getElementById("btnRow");

  let noClicks = 0;

  /* DATE STAMP */
  const today = new Date();
  document.getElementById("stampDate").innerText =
    today.toLocaleDateString(undefined, { year:"numeric", month:"short", day:"numeric" });

  /* MAILBOX -> ENVELOPE */
  mailbox.addEventListener("click", () => {
    mailbox.style.display = "none";
    envelope.style.display = "block";
  });

  /* FLIP ENVELOPE (click envelope) */
  envelope.addEventListener("click", (e) => {
    if (e.target === flap) return;
    envelope.classList.toggle("flip");
  });

  /* OPEN FIRST LETTER */
  flap.addEventListener("click", (e) => {
    e.stopPropagation();
    openLetter();
  });

  function openLetter(){
    overlayLetter.style.display = "grid";
    resetNoButton();
  }

  function closeLetter(){
    overlayLetter.style.display = "none";
  }

  function openResponse(){
    overlayResponse.style.display = "grid";
  }

  function closeResponse(){
    overlayResponse.style.display = "none";
  }

  closeLetterBtn.addEventListener("click", closeLetter);
  closeResponseBtn.addEventListener("click", closeResponse);

  /* click outside closes */
  overlayLetter.addEventListener("click", () => closeLetter());
  letterCard.addEventListener("click", (e) => e.stopPropagation());

  overlayResponse.addEventListener("click", () => closeResponse());
  responseCard.addEventListener("click", (e) => e.stopPropagation());

  /* YES: hide first letter, open response */
  yesBtn.addEventListener("click", () => {
    closeLetter();
    openResponse();
  });

  /* NO: move 5 times, 6th flies away */
  noBtn.addEventListener("click", () => {
    noClicks++;

    if (noClicks <= 5){
      const rowRect = btnRow.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // limit movement within the button row area
      const maxX = Math.max(0, rowRect.width - btnRect.width - 12);
      const maxY = Math.max(0, rowRect.height - btnRect.height - 12);

      const x = Math.random() * maxX;
      const y = Math.random() * maxY;

      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    } else {
      noBtn.disabled = true;
      noBtn.style.transition = "transform .8s ease, opacity .8s ease";
      noBtn.style.transform = "translateY(-500px) rotate(-18deg)";
      noBtn.style.opacity = "0";
      setTimeout(() => noBtn.style.display = "none", 850);
    }
  });

  function resetNoButton(){
    noClicks = 0;
    noBtn.style.display = "inline-block";
    noBtn.disabled = false;
    noBtn.style.transition = "";
    noBtn.style.opacity = "1";
    noBtn.style.transform = "none";
    noBtn.style.position = "relative";
    noBtn.style.left = "0px";
    noBtn.style.top = "0px";
  }
</script>

</body>
</html>